{% extends 'adminTabs/BaseAdminTab.html' %}

{% block modalID %}ReservaModal{% endblock %}
{% block modalButton %}Crear nueva reserva{% endblock %}
{% block buscadorPlace %}Busca una reserva{% endblock %}
{% block modalID2 %}ReservaModal{% endblock %} <!-- debe ser igual a modalID -->
{% block modaTitle %}Nueva reserva{% endblock %}

{% block modalFormBody %}
    <div class="form-row">
        <div class="col" style="margin-bottom: 16px">
            <label for="UserReserva">Usuario</label>
            <select class="custom-select form-control" required>
                <option value="" selected disabled hidden >Elegir un usuario</option>
                {% for user in usuarios %}
                    <option value="{{ user.id }}">{{ user }}</option>
                {% endfor %}
            </select>
            <div class="invalid-feedback">
                Campo obligatorio
            </div>
        </div>
    </div>
    <div class="form-row">
        <div class="col-md-6 mb-3">
            <label for="FechaInicioInputReserv">Fecha de inicio de reserva</label>
            <input type="datetime-local" class="form-control" id="FechaInicioInputReserv" placeholder="Fecha de inicio" required>
            <div class="invalid-feedback">
                Fecha inválida
            </div>
        </div>
        <div class="col-md-6 mb-3">
            <label for="FechaFinInputReserv">Fecha de fin de reserva</label>
            <input type="datetime-local" class="form-control" id="FechaFinInputReserv" placeholder="Fecha de fin" required>
            <div class="invalid-feedback">
                Fecha inválida
            </div>

        </div>
    </div>

    <div class="form-row">
        <div class="col-md-6 mb-3">
            <label for="TipoObjetoInputReserv">Tipo de objeto</label>
            <select class="custom-select" required>
                <option value="" selected disabled hidden >Elegir un tipo</option>
                {% for opcion,valor in estados_prestamo_tipo %}
                    <option value="{{ opcion }}">{{ opcion }}</option>
                {% endfor %}
            </select>
            <div class="invalid-feedback">
                Campo obligatorio
            </div>

        </div>
        <div class="col-md-6 mb-3">
            <label for="IDobjeto2">Identificador objeto</label>
            <input type="text" class="form-control" id="IDobjeto2" placeholder="Objeto" required>
            <div class="invalid-feedback">
                Objeto inválido
            </div>

        </div>
    </div>
{% endblock %}

{% block modalSaveButton %}<button type="submit" class="btn btn-info">Guardar</button>{% endblock %}

{% block columnasTabla %}
    <th scope="col">Objeto</th>
    <th scope="col">Usuario</th>
    <th scope="col">Inicio reserva</th>
    <th scope="col">Fin reserva</th>
    <th scope="col">Estado
        <select id="filtro_estado_reservas">
            <option value="reservas">---</option>
            {% for estado,valor in estados_reserva %}
                <option value="{{ valor }}">{{ valor }}</option>
            {% endfor %}
        </select>
    </th>
{% endblock %}

{% block cuerpoTabla %}
    {% for reserv in reservas %}
        <tr class="{{ reserv.estado_reserva }} reservas">
            <th scope="row"> <input name="filas_reservas" type="checkbox" value="{{ reserv.id }}">  </th>
            <td> {{ reserv.content_object.nombre }}</td>
            <td> {{ reserv.profile.user.first_name }} {{ reserv.profile.user.last_name }}</td>
            <td> {{ reserv.fh_ini_reserva }}</td>
            <td> {{ reserv.fh_fin_reserva }}</td>
            <td> {{ reserv.estado_reserva }}</td>
            <td>
                <form action={% url 'inventario:landingAdmin' %} method="post" >
                    {% csrf_token %}
                    <input name="identificador" value="{{ reserv.id }}" type="hidden">
                    <button type="submit" class="btn btn-dark" formmethod="post">
                        Modificar
                    </button>
                </form>
            </td>
            <td>
                <form action={% url 'inventario:borrarReserva' %} method="post" >
                    {% csrf_token %}
                    <input name="identificador" value="{{ reserv.id }}" type="hidden">
                    <button type="submit" class="btn btn-info" formmethod="post">
                        Eliminar
                    </button>
                </form>
            </td>


        </tr>
    {% endfor %}
{% endblock %}

{% block botonesCambioEstado %}
    <button type="button" class="btn btn-success" style="float: right;  margin-bottom: 15px">Aceptar</button>

    <button type="button" class="btn btn-danger" style="float: right; margin-right: 12px; margin-bottom: 15px">Rechazar</button>
{% endblock %}

{#<!-- top buttons-->#}
{#            <div class="container">#}
{#                <!-- Button trigger modal -->#}
{#                <div class="row">#}
{#                    <div class="col">#}
{#                        <button type="button" class="btn btn-dark" data-toggle="modal" data-target="#{% block modalID %}{% endblock %}">#}
{#                            Crear nueva reserva#}
{#                        </button>#}
{#                    </div>#}
{#                    <div class="col"></div>#}
{#                    <div class="col-sm">#}
{#                        <div class="input-group mb-3">#}
{#                            <input type="text" class="form-control" placeholder="Busca una reserva">#}
{#                            <div class="input-group-append">#}
{#                                <button class="btn btn-outline-secondary" type="button">Buscar</button>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{##}
{##}
{##}
{#                <!-- Modal -->#}
{#                <div class="modal fade" id="{% block modalID2 %}{% endblock %}" tabindex="-1" role="dialog" aria-hidden="true">#}
{#                    <div class="modal-dialog modal-dialog-centered" role="document">#}
{#                        <div class="modal-content">#}
{#                            <form class="needs-validation" novalidate>#}
{#                                <div class="modal-header">#}
{#                                    <h5 class="modal-title">{% block modaTitle %}{% endblock %}</h5>#}
{#                                    <button type="button" class="close" data-dismiss="modal">#}
{#                                        <span aria-hidden="true">&times;</span>#}
{#                                    </button>#}
{#                                </div>#}
{#                                <div class="modal-body">#}
{#                                    <div class="container">#}
{#                                        {% block modalFormBody %}{% endblock %}#}
{#                                    </div>#}
{#                                </div>#}
{#                                <div class="modal-footer">#}
{#                                    <button type="button" class="btn btn-dark" data-dismiss="modal">Cerrar</button>#}
{#                                    <button type="submit" class="btn btn-info">Guardar</button>#}
{#                                </div>#}
{#                                </form>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{##}
{#            </div>#}
{##}
{#        <!-- tabla de reservas -->#}
{#            <div class="container">#}
{#                <table class="table" >#}
{#                    <thead class="thead-dark">#}
{#                        <tr>#}
{#                            <th scope="col">#</th>#}
{#                            <th scope="col">Usuario</th>#}
{#                            <th scope="col">Articulo</th>#}
{#                            <th scope="col">Fecha inicio</th>#}
{#                            <th scope="col">Fecha fin</th>#}
{#                            <th scope="col">Estado#}
{#                                <select id="filtro_estado_reservas">#}
{#                                    <option value="reservas">---</option>#}
{#                                    {% for estado,valor in estados_reservas %}#}
{#                                        <option value="{{ valor }}">{{ valor }}</option>#}
{#                                    {% endfor %}#}
{#                                </select>#}
{#                            </th>#}
{#                            <th scope="col">Tipo</th>#}
{#                            <th scope="col">Modificar</th>#}
{#                            <th scope="col">Eliminar</th>#}
{#                        </tr>#}
{#                    </thead>#}
{#                    <tbody>#}
{#                        {% for reserv in reservas %}#}
{#                            <tr class="{{ reserv.estado_reserva }} reservas">#}
{#                                <th scope="row"> <input class="reservaCheckbox" type="checkbox" value="{{ reserv.id }}">  </th>#}
{#                                <td>{{ reserv.profile.user.username }}</td>#}
{#                                <td>{{ reserv.content_object.nombre }}</td>#}
{#                                <td>{{ reserv.fh_ini_reserva }}</td>#}
{#                                <td>{{ reserv.fh_fin_reserva }}</td>#}
{#                                <td>{{ reserv.estado_reserva }}</td>#}
{#                                <td >{{ reserv.content_type }}</td>#}
{#                                <td>{{ reserv.content_object.nombre }}</td>#}
{#                                <td>{{ reserv.content_object.nombre }}</td>#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                    </tbody>#}
{##}
{#                </table>#}
{#            </div>#}
{##}
{#        <!-- botones cambio de estado-->#}
{#            <div class="container">#}
{#                <button type="button" class="btn btn-success" onclick="aceptarReservas()"#}
{#                        value="aceptar" style="float: right">Aceptar reservas</button>#}
{#                &nbsp;&nbsp;&nbsp;&nbsp;#}
{#                <button type="button" class="btn btn-danger" onclick="rechazarReservas()"#}
{#                        value="rechazar" style="float: right; margin-right: 12px">Rechazar reservas</button>#}
{#            </div>#}