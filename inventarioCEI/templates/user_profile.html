{% extends "base.html" %}
{% load static %}

{% block infoUsuario %}
    <div class="row">
        <div class="col-*-*">
            {{ request.user.first_name }} {{ request.user.last_name }}
            <br>{{ request.user.profile.rut }}
            <br>{{ request.user.profile.mail }}
            {% if request.user.profile.hab %}
                <br>Habilitado
            {% else %}
                <br>No Habilitado
            {% endif %}
        </div>
        <div class="col-*-*">
            <div class="container">
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">
                        <img src={% static "img/blank-profile-picture.png" %} width="80" height="80" alt="">
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                        <div class="container">
                            <li role="presentation">
                                <a role="menuitem" tabindex="-1" href="#">
                                    Inicio
                                </a>
                            </li>
                            <hr>
                            <li role="presentation">
                                <a role="menuitem" tabindex="-1" href="{% url 'change_password' %}">
                                    Cambiar Contraseña
                                </a>
                            </li>
                            <hr>
                            <li role="presentation">
                                <a role="menuitem" tabindex="-1" href="{% url 'logout' %}">
                                    Cerrar Sesión
                                </a>
                            </li>
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}

    <ul class="nav nav-pills nav-fill mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
            <a class="nav-link" data-toggle="pill" role="tab" aria-selected="false">Reservar Espacio</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="pill" role="tab" aria-selected="false">Reservar Artículo</a>
        </li>
    </ul>

    <br>

    <div class="container">
        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="pills-reservas-tab" data-toggle="pill" href="#pills-reservas"
               role="tab" aria-controls="pills-reservas" aria-selected="true">Reservas</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="pills-prestamos-tab" data-toggle="pill" href="#pills-prestamos"
               role="tab" aria-controls="pills-prestamos" aria-selected="false">Prestamos</a>
          </li>
        </ul>

        <div class="tab-content" id="pills-tabContent">
          <div class="tab-pane fade show active" id="pills-reservas" role="tabpanel" aria-labelledby="pills-reservas-tab">
            {% include 'res_table.html' %}
          </div>
          <div class="tab-pane fade" id="pills-prestamos" role="tabpanel" aria-labelledby="pills-prestamos-tab">
            {% include 'pres_table.html' %}
          </div>
        </div>
    </div>

{% endblock %}

{% block scripts %}
    <script>
        function showData(text, fotoURL, name, fh_ini, fh_fin){
            let box = document.getElementById("photo");
            box.innerHTML = "";
            let box2 = document.getElementById("description");
            box2.innerHTML = "";

            let line = document.createElement("br");
            let photo = document.createElement("img");
            photo.src = fotoURL;
            photo.height = "200";
            photo.width = "250";

            box.appendChild(photo);
            box.appendChild(line);

            let n = document.createElement("p");
            let d = document.createElement("p");
            let fi = document.createElement("p");
            let ff = document.createElement("p");

            let description = document.createTextNode("Descripción: "+text);
            let nametxt = document.createTextNode(name);
            let fitxt = document.createTextNode("Inicio: "+fh_ini);
            let fftxt = document.createTextNode("Fin: "+fh_fin);

            n.appendChild(nametxt);
            d.appendChild(description);
            fi.appendChild(fitxt);
            ff.appendChild(fftxt);

            box.appendChild(fi);
            box.appendChild(ff);
            box2.appendChild(n);
            box2.appendChild(d);
        }
    </script>
{% endblock %}